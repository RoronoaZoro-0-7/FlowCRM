module.exports=[70604,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(48078),e=a.i(3130),f=a.i(40695),g=a.i(15618),h=a.i(38422),i=a.i(4667),j=a.i(74808),k=a.i(88237),l=a.i(76504),m=a.i(54161),n=a.i(50463),o=a.i(50104),p=a.i(46872),q=a.i(72752),r=a.i(30553),s="Avatar",[t,u]=(0,o.createContextScope)(s),[v,w]=t(s),x=c.forwardRef((a,d)=>{let{__scopeAvatar:e,...f}=a,[g,h]=c.useState("idle");return(0,b.jsx)(v,{scope:e,imageLoadingStatus:g,onImageLoadingStatusChange:h,children:(0,b.jsx)(r.Primitive.span,{...f,ref:d})})});x.displayName=s;var y="AvatarImage";c.forwardRef((a,d)=>{let{__scopeAvatar:e,src:f,onLoadingStatusChange:g=()=>{},...h}=a,i=w(y,e),j=function(a,b){let[d,e]=c.useState("idle");return(0,q.useLayoutEffect)(()=>{if(!a)return void e("error");let c=!0,d=new window.Image,f=a=>()=>{c&&e(a)};return e("loading"),d.onload=f("loaded"),d.onerror=f("error"),d.src=a,b&&(d.referrerPolicy=b),()=>{c=!1}},[a,b]),d}(f,h.referrerPolicy),k=(0,p.useCallbackRef)(a=>{g(a),i.onImageLoadingStatusChange(a)});return(0,q.useLayoutEffect)(()=>{"idle"!==j&&k(j)},[j,k]),"loaded"===j?(0,b.jsx)(r.Primitive.img,{...h,ref:d,src:f}):null}).displayName=y;var z="AvatarFallback",A=c.forwardRef((a,d)=>{let{__scopeAvatar:e,delayMs:f,...g}=a,h=w(z,e),[i,j]=c.useState(void 0===f);return c.useEffect(()=>{if(void 0!==f){let a=window.setTimeout(()=>j(!0),f);return()=>window.clearTimeout(a)}},[f]),i&&"loaded"!==h.imageLoadingStatus?(0,b.jsx)(r.Primitive.span,{...g,ref:d}):null});A.displayName=z;var B=a.i(97895);function C({className:a,...c}){return(0,b.jsx)(x,{"data-slot":"avatar",className:(0,B.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...c})}function D({className:a,...c}){return(0,b.jsx)(A,{"data-slot":"avatar-fallback",className:(0,B.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...c})}var E=a.i(17755),F=a.i(10448),G=a.i(81560),H=a.i(23292);let I={ADMIN:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",MANAGER:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",SALES:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},J={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",inactive:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"};function K({onEditUser:a,onDeleteUser:d}){let[e,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{try{let a=await (0,j.getUsers)();g(a)}catch(a){console.error("[v0] Failed to fetch users:",a),H.toast.error("Failed to load users")}finally{i(!1)}})()},[]),h)?(0,b.jsx)("div",{className:"rounded-lg border border-border/50 overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border/50 bg-muted/30",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:(0,b.jsx)(n.Skeleton,{className:"h-4 w-20"})}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:(0,b.jsx)(n.Skeleton,{className:"h-4 w-24"})}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:(0,b.jsx)(n.Skeleton,{className:"h-4 w-20"})}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:(0,b.jsx)(n.Skeleton,{className:"h-4 w-16"})}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:(0,b.jsx)(n.Skeleton,{className:"h-4 w-12"})})]})}),(0,b.jsx)("tbody",{children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("tr",{className:"border-b border-border/50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(n.Skeleton,{className:"h-4 w-32"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(n.Skeleton,{className:"h-4 w-40"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(n.Skeleton,{className:"h-4 w-24"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(n.Skeleton,{className:"h-4 w-20"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:(0,b.jsx)(n.Skeleton,{className:"h-8 w-8 ml-auto"})})]},c))})]})}):0===e.length?(0,b.jsx)("div",{className:"rounded-lg border border-border/50 border-dashed p-8 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No users found."})}):(0,b.jsx)("div",{className:"rounded-lg border border-border/50 overflow-hidden",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{className:"bg-muted/30",children:(0,b.jsxs)(k.TableRow,{className:"border-b border-border/50 hover:bg-muted/30",children:[(0,b.jsx)(k.TableHead,{children:"User"}),(0,b.jsx)(k.TableHead,{children:"Email"}),(0,b.jsx)(k.TableHead,{children:"Role"}),(0,b.jsx)(k.TableHead,{children:"Status"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Last Login"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(k.TableBody,{children:e.map(c=>(0,b.jsxs)(k.TableRow,{className:"border-b border-border/50 hover:bg-muted/50 transition-colors",children:[(0,b.jsx)(k.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(C,{className:"h-8 w-8",children:(0,b.jsx)(D,{className:"text-xs font-bold",children:c.name.split(" ").map(a=>a[0]).join("").toUpperCase()})}),(0,b.jsx)("span",{className:"font-medium",children:c.name})]})}),(0,b.jsx)(k.TableCell,{className:"text-sm text-muted-foreground",children:c.email}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(m.Badge,{variant:"outline",className:I[c.role]||"bg-gray-100",children:c.role})}),(0,b.jsx)(k.TableCell,{children:(0,b.jsx)(m.Badge,{variant:"outline",className:J[c.status]||"bg-gray-100",children:c.status})}),(0,b.jsx)(k.TableCell,{className:"text-right text-sm text-muted-foreground",children:c.lastLogin?new Date(c.lastLogin).toLocaleDateString():"Never"}),(0,b.jsx)(k.TableCell,{className:"text-right",children:(0,b.jsxs)(l.DropdownMenu,{children:[(0,b.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(E.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>a?.(c),children:[(0,b.jsx)(F.Edit2,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,b.jsxs)(l.DropdownMenuItem,{onClick:()=>d?.(c.id),className:"text-destructive",children:[(0,b.jsx)(G.Trash2,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})})]},c.id))})]})})}var L=a.i(65733),M=a.i(5522),N=a.i(87682),O=a.i(17171);let P=[{value:"SALES",label:"Sales User"},{value:"MANAGER",label:"Manager"},{value:"ADMIN",label:"Admin"}];function Q({isOpen:a,onClose:d,onSuccess:e}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)({name:"",email:"",role:"SALES"}),k=a=>{let{name:b,value:c}=a.target;j(a=>({...a,[b]:c}))},l=async a=>{a.preventDefault(),h(!0);try{H.toast.success("User added successfully"),j({name:"",email:"",role:"SALES"}),d(),e?.()}catch(a){H.toast.error(a instanceof Error?a.message:"Failed to add user")}finally{h(!1)}};return(0,b.jsx)(L.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(L.DialogContent,{className:"max-w-md",children:[(0,b.jsx)(L.DialogHeader,{children:(0,b.jsx)(L.DialogTitle,{children:"Add Team Member"})}),(0,b.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(O.Label,{htmlFor:"name",children:"Full Name *"}),(0,b.jsx)(M.Input,{id:"name",name:"name",value:i.name,onChange:k,placeholder:"John Doe",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(O.Label,{htmlFor:"email",children:"Email *"}),(0,b.jsx)(M.Input,{id:"email",name:"email",type:"email",value:i.email,onChange:k,placeholder:"john@example.com",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(O.Label,{htmlFor:"role",children:"Role *"}),(0,b.jsxs)(N.Select,{value:i.role,onValueChange:a=>{j(b=>({...b,role:a}))},children:[(0,b.jsx)(N.SelectTrigger,{id:"role",children:(0,b.jsx)(N.SelectValue,{})}),(0,b.jsx)(N.SelectContent,{children:P.map(a=>(0,b.jsx)(N.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsx)("div",{className:"rounded-lg bg-muted/50 p-3 text-xs text-muted-foreground",children:"An invitation email will be sent to the user with login credentials."}),(0,b.jsxs)(L.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:d,children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",disabled:g,children:g?"Adding...":"Add User"})]})]})]})})}function R(){let{user:a}=(0,h.useAuth)(),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),n=async a=>{console.log("Delete user:",a)};return(0,b.jsx)(i.ProtectedRoute,{requiredRoles:["ADMIN"],children:(0,b.jsx)(d.AppLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Users & Roles"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage team members and their roles"})]}),(0,b.jsxs)(f.Button,{size:"lg",className:"gap-2",onClick:()=>k(!0),children:[(0,b.jsx)(g.Plus,{className:"h-4 w-4"}),"Add User"]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"Team Members"})}),(0,b.jsx)("div",{className:"px-6 pb-6",children:(0,b.jsx)(K,{onEditUser:a=>{m(a)},onDeleteUser:n})})]}),(0,b.jsx)(Q,{isOpen:j,onClose:()=>k(!1)})]})})})}a.s(["default",()=>R],70604)}];

//# sourceMappingURL=app_users_page_tsx_bc4a4b84._.js.map