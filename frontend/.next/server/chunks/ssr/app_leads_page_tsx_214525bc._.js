module.exports=[3802,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(48078),e=a.i(3130),f=a.i(40695),g=a.i(15618),h=a.i(74808),i=a.i(38422),j=a.i(88237),k=a.i(76504),l=a.i(54161),m=a.i(50463),n=a.i(17755),o=a.i(10448),p=a.i(81560),q=a.i(77156),r=a.i(23292);let s={new:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",contacted:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",qualified:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",lost:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",won:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"};function t({onEditLead:a,onViewLead:d,onDeleteLead:e}){let[g,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),{user:w}=(0,i.useAuth)();return((0,c.useEffect)(()=>{(async()=>{try{let a=await (0,h.getLeads)(),b=a;w?.role==="SALES"&&(b=a.filter(a=>a.ownerId===w.id)),t(b)}catch(a){console.error("[v0] Failed to fetch leads:",a),r.toast.error("Failed to load leads")}finally{v(!1)}})()},[w]),u)?(0,b.jsx)("div",{className:"rounded-lg border border-border/50 overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border/50 bg-muted/30",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-20"})}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-24"})}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-20"})}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-16"})}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-12"})})]})}),(0,b.jsx)("tbody",{children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("tr",{className:"border-b border-border/50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-32"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-40"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-24"})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(m.Skeleton,{className:"h-4 w-20"})}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:(0,b.jsx)(m.Skeleton,{className:"h-8 w-8 ml-auto"})})]},c))})]})}):0===g.length?(0,b.jsx)("div",{className:"rounded-lg border border-border/50 border-dashed p-8 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No leads found. Create your first lead to get started."})}):(0,b.jsx)("div",{className:"rounded-lg border border-border/50 overflow-hidden",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{className:"bg-muted/30",children:(0,b.jsxs)(j.TableRow,{className:"border-b border-border/50 hover:bg-muted/30",children:[(0,b.jsx)(j.TableHead,{children:"Name"}),(0,b.jsx)(j.TableHead,{children:"Company"}),(0,b.jsx)(j.TableHead,{children:"Email"}),(0,b.jsx)(j.TableHead,{children:"Status"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Value"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Owner"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(j.TableBody,{children:g.map(c=>(0,b.jsxs)(j.TableRow,{className:"border-b border-border/50 hover:bg-muted/50 transition-colors",children:[(0,b.jsx)(j.TableCell,{className:"font-medium",children:c.name}),(0,b.jsx)(j.TableCell,{className:"text-muted-foreground",children:c.company}),(0,b.jsx)(j.TableCell,{className:"text-sm",children:c.email}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)(l.Badge,{variant:"outline",className:s[c.status]||"bg-gray-100",children:c.status})}),(0,b.jsxs)(j.TableCell,{className:"text-right font-medium",children:["$",c.value.toLocaleString()]}),(0,b.jsx)(j.TableCell,{className:"text-right text-muted-foreground text-sm",children:c.ownerName}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsxs)(k.DropdownMenu,{children:[(0,b.jsx)(k.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",children:(0,b.jsx)(n.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(k.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>d?.(c),children:[(0,b.jsx)(q.Eye,{className:"h-4 w-4 mr-2"}),"View"]}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>a?.(c),children:[(0,b.jsx)(o.Edit2,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,b.jsxs)(k.DropdownMenuItem,{onClick:()=>e?.(c.id),className:"text-destructive",children:[(0,b.jsx)(p.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},c.id))})]})})}var u=a.i(65733),v=a.i(5522),w=a.i(87682),x=a.i(17171),y=a.i(97895);function z({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,y.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}let A=["new","contacted","qualified","lost","won"];function B({lead:a,isOpen:d,onClose:e,onSave:g}){let[h,i]=(0,c.useState)(a),[j,k]=(0,c.useState)(!1),l=a=>{let{name:b,value:c}=a.target;i(a=>({...a,[b]:c}))},m=async()=>{if(h){k(!0);try{r.toast.success("Lead saved successfully"),g?.(h),e()}catch(a){r.toast.error("Failed to save lead")}finally{k(!1)}}};return a&&h?(0,b.jsx)(u.Dialog,{open:d,onOpenChange:e,children:(0,b.jsxs)(u.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(u.DialogHeader,{children:(0,b.jsx)(u.DialogTitle,{children:"Lead Details"})}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"name",children:"Name"}),(0,b.jsx)(v.Input,{id:"name",name:"name",value:h.name||"",onChange:l,placeholder:"Lead name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(v.Input,{id:"email",name:"email",type:"email",value:h.email||"",onChange:l,placeholder:"email@example.com"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"company",children:"Company"}),(0,b.jsx)(v.Input,{id:"company",name:"company",value:h.company||"",onChange:l,placeholder:"Company name"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"value",children:"Deal Value"}),(0,b.jsx)(v.Input,{id:"value",type:"number",value:h.value||0,onChange:a=>{i(b=>({...b,value:parseInt(a.target.value,10)||0}))},placeholder:"0"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"status",children:"Status"}),(0,b.jsxs)(w.Select,{value:h.status,onValueChange:a=>{i(b=>({...b,status:a}))},children:[(0,b.jsx)(w.SelectTrigger,{id:"status",children:(0,b.jsx)(w.SelectValue,{})}),(0,b.jsx)(w.SelectContent,{children:A.map(a=>(0,b.jsx)(w.SelectItem,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"notes",children:"Notes"}),(0,b.jsx)(z,{id:"notes",name:"notes",placeholder:"Add any notes about this lead...",className:"min-h-24",disabled:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Owner"}),(0,b.jsx)("p",{children:h.ownerName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Created"}),(0,b.jsx)("p",{children:h.createdAt&&new Date(h.createdAt).toLocaleDateString()})]})]})]}),(0,b.jsxs)(u.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:e,children:"Close"}),(0,b.jsx)(f.Button,{onClick:m,disabled:j,children:j?"Saving...":"Save Changes"})]})]})}):null}function C({isOpen:a,onClose:d,onSuccess:e}){let[g,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)({name:"",email:"",company:"",value:"",notes:""}),l=a=>{let{name:b,value:c}=a.target;k(a=>({...a,[b]:c}))},m=async a=>{a.preventDefault(),i(!0);try{await (0,h.createLead)({name:j.name,email:j.email,company:j.company,value:parseInt(j.value,10)||0,status:"new",notes:j.notes}),r.toast.success("Lead created successfully"),k({name:"",email:"",company:"",value:"",notes:""}),d(),e?.()}catch(a){r.toast.error(a instanceof Error?a.message:"Failed to create lead")}finally{i(!1)}};return(0,b.jsx)(u.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(u.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(u.DialogHeader,{children:(0,b.jsx)(u.DialogTitle,{children:"Create New Lead"})}),(0,b.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"name",children:"Name *"}),(0,b.jsx)(v.Input,{id:"name",name:"name",value:j.name,onChange:l,placeholder:"Lead name",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"email",children:"Email *"}),(0,b.jsx)(v.Input,{id:"email",name:"email",type:"email",value:j.email,onChange:l,placeholder:"email@example.com",required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"company",children:"Company *"}),(0,b.jsx)(v.Input,{id:"company",name:"company",value:j.company,onChange:l,placeholder:"Company name",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"value",children:"Deal Value"}),(0,b.jsx)(v.Input,{id:"value",name:"value",type:"number",value:j.value,onChange:l,placeholder:"0"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Label,{htmlFor:"notes",children:"Notes"}),(0,b.jsx)(z,{id:"notes",name:"notes",value:j.notes,onChange:l,placeholder:"Add any notes about this lead...",className:"min-h-24"})]}),(0,b.jsxs)(u.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:d,children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",disabled:g,children:g?"Creating...":"Create Lead"})]})]})]})})}function D(){let[a,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),m=async a=>{console.log("Delete lead:",a)};return(0,b.jsx)(d.AppLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Leads"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage and track all your sales leads"})]}),(0,b.jsxs)(f.Button,{size:"lg",className:"gap-2",onClick:()=>l(!0),children:[(0,b.jsx)(g.Plus,{className:"h-4 w-4"}),"New Lead"]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"All Leads"})}),(0,b.jsx)("div",{className:"px-6 pb-6",children:(0,b.jsx)(t,{onViewLead:a=>{h(a),j(!0)},onEditLead:a=>{h(a),j(!0)},onDeleteLead:m})})]}),(0,b.jsx)(B,{lead:a,isOpen:i,onClose:()=>{j(!1),h(null)}}),(0,b.jsx)(C,{isOpen:k,onClose:()=>l(!1)})]})})}a.s(["default",()=>D],3802)}];

//# sourceMappingURL=app_leads_page_tsx_214525bc._.js.map