module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},50463,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"skeleton",className:(0,c.cn)("bg-accent animate-pulse rounded-md",a),...d})}a.s(["Skeleton",()=>d])},48078,70106,1027,23312,62213,33508,4667,a=>{"use strict";var b=a.i(87924),c=a.i(38422),d=a.i(38246),e=a.i(50944),f=a.i(40695),g=a.i(72131);let h=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let j=(0,g.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:j,...k},l)=>(0,g.createElement)("svg",{ref:l,...i,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:h("lucide",e),...k},[...j.map(([a,b])=>(0,g.createElement)(a,b)),...Array.isArray(f)?f:[f]])),k=(a,b)=>{let c=(0,g.forwardRef)(({className:c,...d},e)=>(0,g.createElement)(j,{ref:e,iconNode:b,className:h(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,c),...d}));return c.displayName=`${a}`,c};a.s(["default",()=>k],70106);let l=k("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),m=k("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),n=k("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);a.s(["Zap",()=>n],1027);let o=k("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),p=k("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);a.s(["Bell",()=>p],23312);let q=k("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),r=k("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),s=k("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),t=k("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>t],62213),a.s(["X",()=>t],33508);let u=[{href:"/dashboard",label:"Dashboard",icon:l},{href:"/leads",label:"Leads",icon:m},{href:"/deals",label:"Deals",icon:n},{href:"/tasks",label:"Tasks",icon:o},{href:"/notifications",label:"Notifications",icon:p}],v=[{href:"/users",label:"Users & Roles",icon:m},{href:"/settings",label:"Settings",icon:q}];function w(){let{user:a,logout:h}=(0,c.useAuth)(),i=(0,e.usePathname)(),[j,k]=(0,g.useState)(!1);if(!a)return null;let l=[...u,..."ADMIN"===a.role?v:[]],m=async()=>{await h()},n=()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex flex-col gap-0.5",children:l.map(a=>{let c=a.icon,e=i===a.href;return(0,b.jsx)(d.default,{href:a.href,children:(0,b.jsxs)(f.Button,{variant:e?"secondary":"ghost",size:"sm",className:"w-full justify-start gap-2",onClick:()=>k(!1),children:[(0,b.jsx)(c,{className:"h-4 w-4"}),a.label]})},a.href)})}),(0,b.jsx)("div",{className:"border-t border-border/50 pt-4",children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"w-full justify-start gap-2 text-destructive hover:text-destructive",onClick:m,children:[(0,b.jsx)(r,{className:"h-4 w-4"}),"Logout"]})})]});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("aside",{className:"hidden h-screen w-60 border-r border-border/50 bg-sidebar p-4 flex-col lg:flex sticky top-0",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-sidebar-foreground",children:"FlowCRM"}),(0,b.jsx)("p",{className:"text-xs text-sidebar-foreground/60 mt-1",children:a.name}),(0,b.jsx)("div",{className:"inline-block mt-2 rounded-full bg-sidebar-primary/20 px-2 py-1",children:(0,b.jsx)("p",{className:"text-xs font-medium text-sidebar-primary",children:a.role})})]}),(0,b.jsx)("nav",{className:"flex flex-col flex-1 gap-2",children:(0,b.jsx)(n,{})})]}),(0,b.jsxs)("div",{className:"sticky top-0 z-40 flex items-center justify-between border-b border-border/50 bg-background/95 px-4 py-3 lg:hidden",children:[(0,b.jsx)("h1",{className:"text-lg font-bold",children:"FlowCRM"}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>k(!j),children:j?(0,b.jsx)(t,{className:"h-5 w-5"}):(0,b.jsx)(s,{className:"h-5 w-5"})})]}),j&&(0,b.jsx)("div",{className:"fixed inset-0 top-16 z-30 bg-background/80 backdrop-blur-sm lg:hidden",children:(0,b.jsx)("div",{className:"border-r border-border/50 bg-sidebar p-4",children:(0,b.jsx)("nav",{className:"space-y-2",children:(0,b.jsx)(n,{})})})})]})}var x=a.i(50463);function y({children:a,requiredRoles:d=[]}){let{isAuthenticated:f,loading:h,user:i}=(0,c.useAuth)(),j=(0,e.useRouter)();return((0,g.useEffect)(()=>{h||f||j.push("/login"),!h&&f&&i&&d.length>0&&!d.includes(i.role)&&j.push("/unauthorized")},[h,f,i,d,j]),h)?(0,b.jsxs)("div",{className:"space-y-4 p-8",children:[(0,b.jsx)(x.Skeleton,{className:"h-8 w-64"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(x.Skeleton,{className:"h-4 w-full"}),(0,b.jsx)(x.Skeleton,{className:"h-4 w-full"}),(0,b.jsx)(x.Skeleton,{className:"h-4 w-1/2"})]})]}):!f||i&&d.length>0&&!d.includes(i.role)?null:(0,b.jsx)(b.Fragment,{children:a})}function z({children:a}){return(0,b.jsx)(y,{children:(0,b.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,b.jsx)(w,{}),(0,b.jsx)("main",{className:"flex-1 overflow-auto",children:(0,b.jsx)("div",{className:"p-6",children:a})})]})})}a.s(["ProtectedRoute",()=>y],4667),a.s(["AppLayout",()=>z],48078)},30553,a=>{"use strict";var b=a.i(72131),c=a.i(35112),d=a.i(11011),e=a.i(87924),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,c)=>{let f=b.forwardRef((a,b)=>{let{asChild:f,...g}=a,h=f?d.Slot:c;return(0,e.jsx)(h,{...g,ref:b})});return f.displayName=`Primitive.${c}`,{...a,[c]:f}},{});function g(a,b){a&&c.flushSync(()=>a.dispatchEvent(b))}a.s(["Primitive",()=>f,"dispatchDiscreteCustomEvent",()=>g])},74808,54161,a=>{"use strict";async function b(a,c={}){let d=localStorage.getItem("accessToken"),e={"Content-Type":"application/json",...c.headers};d&&(e.Authorization=`Bearer ${d}`);let f=await fetch(`http://localhost:3001/api${a}`,{...c,headers:e});if(!f.ok)throw Error((await f.json()).message||`API error: ${f.status}`);return f.json()}async function c(){return b("/leads")}async function d(a){return b("/leads",{method:"POST",body:JSON.stringify(a)})}async function e(){return b("/notifications")}async function f(a){return b(`/notifications/${a}/read`,{method:"POST"})}async function g(){return b("/users")}a.s(["createLead",()=>d,"getLeads",()=>c,"getNotifications",()=>e,"getUsers",()=>g,"markNotificationAsRead",()=>f],74808);var h=a.i(87924),i=a.i(11011),j=a.i(187),k=a.i(97895);let l=(0,j.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function m({className:a,variant:b,asChild:c=!1,...d}){let e=c?i.Slot:"span";return(0,h.jsx)(e,{"data-slot":"badge",className:(0,k.cn)(l({variant:b}),a),...d})}a.s(["Badge",()=>m],54161)},7379,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e="horizontal",f=["horizontal","vertical"],g=c.forwardRef((a,c)=>{var g;let{decorative:h,orientation:i=e,...j}=a,k=(g=i,f.includes(g))?i:e;return(0,b.jsx)(d.Primitive.div,{"data-orientation":k,...h?{role:"none"}:{"aria-orientation":"vertical"===k?k:void 0,role:"separator"},...j,ref:c})});g.displayName="Separator";var h=a.i(97895);function i({className:a,orientation:c="horizontal",decorative:d=!0,...e}){return(0,b.jsx)(g,{"data-slot":"separator",decorative:d,orientation:c,className:(0,h.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...e})}a.s(["Separator",()=>i],7379)},47914,a=>{"use strict";var b=a.i(87924),c=a.i(48078),d=a.i(3130),e=a.i(72131),f=a.i(74808),g=a.i(40695),h=a.i(54161),i=a.i(50463),j=a.i(7379),k=a.i(70106);let l=(0,k.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),m=(0,k.default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),n=(0,k.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),o=(0,k.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var p=a.i(1027);let q=(0,k.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var r=a.i(33508),s=a.i(23292),t=a.i(97895);let u={alert:(0,b.jsx)(l,{className:"h-4 w-4 text-destructive"}),success:(0,b.jsx)(m,{className:"h-4 w-4 text-green-600"}),message:(0,b.jsx)(n,{className:"h-4 w-4 text-blue-600"}),task:(0,b.jsx)(o,{className:"h-4 w-4 text-purple-600"}),deal:(0,b.jsx)(p.Zap,{className:"h-4 w-4 text-yellow-600"}),lead:(0,b.jsx)(q,{className:"h-4 w-4 text-cyan-600"})};function v({compact:a=!1}){let[c,d]=(0,e.useState)([]),[k,l]=(0,e.useState)(!0),[m,n]=(0,e.useState)("all");(0,e.useEffect)(()=>{(async()=>{try{let a=await (0,f.getNotifications)();d(a)}catch(a){console.error("[v0] Failed to fetch notifications:",a),s.toast.error("Failed to load notifications")}finally{l(!1)}})()},[]);let o=async a=>{try{await (0,f.markNotificationAsRead)(a),d(b=>b.map(b=>b.id===a?{...b,read:!0}:b))}catch(a){console.error("[v0] Failed to mark notification as read:",a)}},p="unread"===m?c.filter(a=>!a.read):c,q=a?p.slice(0,5):p,v=c.filter(a=>!a.read).length;return k?(0,b.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"space-y-2 p-3 rounded-lg border border-border/50",children:[(0,b.jsx)(i.Skeleton,{className:"h-4 w-32"}),(0,b.jsx)(i.Skeleton,{className:"h-3 w-full"})]},c))}):0===q.length?(0,b.jsx)("div",{className:"rounded-lg border border-border/50 border-dashed p-8 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"unread"===m?"No unread notifications":"No notifications"})}):(0,b.jsxs)("div",{className:"space-y-2",children:[!a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{variant:"all"===m?"default":"outline",size:"sm",onClick:()=>n("all"),children:"All"}),(0,b.jsxs)(g.Button,{variant:"unread"===m?"default":"outline",size:"sm",onClick:()=>n("unread"),children:["Unread (",v,")"]})]})}),(0,b.jsx)(j.Separator,{})]}),(0,b.jsx)("div",{className:"space-y-2",children:q.map(a=>(0,b.jsxs)("div",{className:(0,t.cn)("flex items-start gap-3 rounded-lg border p-3 transition-colors",a.read?"border-border/30 bg-muted/20":"border-border/50 bg-muted/50"),children:[(0,b.jsx)("div",{className:"mt-1 flex-shrink-0",children:u[a.type]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-sm leading-tight",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1 leading-snug",children:a.description})]}),!a.read&&(0,b.jsx)(h.Badge,{variant:"default",className:"flex-shrink-0 text-xs",children:"New"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 mt-2",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsxs)("div",{className:"flex gap-1",children:[!a.read&&(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",onClick:()=>o(a.id),children:"Mark as read"}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{var b;return b=a.id,void d(a=>a.filter(a=>a.id!==b))},children:(0,b.jsx)(r.X,{className:"h-3 w-3"})})]})]})]})]},a.id))}),a&&q.length<p.length&&(0,b.jsx)(g.Button,{variant:"outline",className:"w-full bg-transparent",children:"View All Notifications"})]})}function w(){return(0,b.jsx)(c.AppLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Notifications"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Stay updated with all your important alerts and activities"})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Notification Center"})}),(0,b.jsx)("div",{className:"px-6 pb-6",children:(0,b.jsx)(v,{})})]})]})})}a.s(["default",()=>w],47914)}];

//# sourceMappingURL=_72e45f38._.js.map